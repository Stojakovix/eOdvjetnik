<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:scheduler="clr-namespace:Syncfusion.Maui.Scheduler;assembly=Syncfusion.Maui.Scheduler"
             xmlns:models="clr-namespace:eOdvjetnik.Models"
             x:Class="eOdvjetnik.Views.Kalendar"
             xmlns:local="clr-namespace:eOdvjetnik.ViewModel"
             Title="Kalendar"
             xmlns:sfPopup="clr-namespace:Syncfusion.Maui.Popup;assembly=Syncfusion.Maui.Popup"
             
             
             >
    <ContentPage.BindingContext>
        <local:KalendarViewModel x:Name="viewmodel"/>
    </ContentPage.BindingContext>


    


    
        <ContentPage.Resources>
            <DataTemplate x:Key="AppointmentTemplate"
                          >
<!--Ne koristit Frame, nema podršku za dynamic data binding, koristi border-->
                <Border BackgroundColor="LightBlue"
                        x:Name="border"
                        Opacity="0.5"
                        Padding="5,15,10,5"                     
                        StrokeShape="RoundRectangle 5,5,5,5"
                        Stroke="Transparent"
                        
                       >
                <Label Text="{Binding Subject}"
                       TextColor="Black"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       FontFamily="Bold"
                       Padding="5,5,5,5"
                       LineBreakMode="WordWrap"
                       MaxLines="2"/>
                    
                   

            </Border>

            </DataTemplate>

            <DataTemplate x:Key="AllDayAppointmentTemplate">
                <Grid BackgroundColor="LightBlue"
                      Opacity="0.5">
                    <Label Text="{Binding Subject}"
                           VerticalOptions="Center"
                           TextColor="Black"
                           LineBreakMode="MiddleTruncation"
                           MaxLines="2"
                           FontSize="Caption"
                           FontAttributes="Bold"
                           HorizontalOptions="Center">
                        
                    </Label>
                </Grid>
            </DataTemplate>
        </ContentPage.Resources>



    <scheduler:SfScheduler x:Name="Scheduler" 
                           View="Day"
                           FirstDayOfWeek="Monday"
                           DoubleTapped="Scheduler_DoubleTapped"
                           SelectedCellBackground="transparent"
                           AppointmentsSource="{Binding Appointments}"
                           ShowWeekNumber="True"
                           BackgroundColor="{AppThemeBinding Dark=White, Light=White}"
                           AllowedViews="Day,Week,WorkWeek,Agenda,Month"
                           TodayHighlightBrush="Red"
                           EnableReminder="True"
                           SelectedAppointmentBackground="transparent"
                           
                           >
        <scheduler:SfScheduler.DaysView>
                <scheduler:SchedulerDaysView
                    TimeFormat="HH:mm "
                    TimeInterval="1:0:0"
                    CurrentTimeIndicatorBrush="Red"
                    AppointmentTemplate="{StaticResource AppointmentTemplate}"
                    AllDayAppointmentTemplate="{StaticResource AllDayAppointmentTemplate}"
                    
                    >
                    <scheduler:SchedulerDaysView.TimeRegionTemplate>
                        <DataTemplate>
                            <Grid Background="#fafafa">
                                <!--Background="#f7f7f7-->
                            </Grid>
                        </DataTemplate>
                    </scheduler:SchedulerDaysView.TimeRegionTemplate>
                     
                </scheduler:SchedulerDaysView>
            </scheduler:SfScheduler.DaysView>
      
        </scheduler:SfScheduler>

    

</ContentPage>
    
    